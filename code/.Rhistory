# Example from https://www.rcharlie.com/spotifyr/
# sudo apt-get install libssl-dev
# sudo apt-get install libcurl4-openssl-dev
# install.packages('spotifyr')
library(spotifyr)
library(readr)
library(stringr)
library(tidyverse)
library(knitr)
library(ggjoy)
# Authentication
client_id <- paste(readLines("../keys/client_id.txt"), collapse=" ")
client_secret <- paste(readLines("../keys/client_secret.txt"), collapse=" ")
Sys.setenv(SPOTIFY_CLIENT_ID = client_id)
Sys.setenv(SPOTIFY_CLIENT_SECRET = client_secret)
access_token <- get_spotify_access_token()
# What was The Beatlesâ favorite key?
beatles <- get_artist_audio_features('the beatles')
# Whatâs the most joyful Joy Division song?
joy <- get_artist_audio_features('joy division')
joy %>%
arrange(-valence) %>%
select(track_name, valence) %>%
head(5) %>%
kable()
# Joyplot of the emotional rollercoasters that are Joy Divisionâs albums
ggplot(joy, aes(x = valence, y = album_name)) +
geom_joy() +
theme_joy() +
ggtitle("Joyplot of Joy Division's joy distributions", subtitle = "Based on valence pulled from Spotify's Web API with spotifyr")
View(beatles)
View(joy)
# Libraries
library(spotifyr)
library(tidyverse)
library(ggplot2)
# Authentication
client_id <- paste(readLines("../keys/client_id.txt"), collapse=" ")
client_secret <- paste(readLines("../keys/client_secret.txt"), collapse=" ")
Sys.setenv(SPOTIFY_CLIENT_ID = client_id)
Sys.setenv(SPOTIFY_CLIENT_SECRET = client_secret)
access_token <- get_spotify_access_token()
data <- get_artist_audio_features('the beatles', include_groups = c('album', 'single'))
artists <- c('queen','eminem')
for (artist in artists){
audio_features <- get_artist_audio_features(artist, include_groups = c('album', 'single'))
data <- rbind(data, audio_features)
}
View(data)
xd = get_artist_audio_features(artist = 'the beatles', include_groups = c("album", "single"), return_closest_artist = TRUE, dedupe_albums = TRUE,authorization = get_spotify_access_token())
View(xd)
View(data)
album = get_track("183Klch3PBWLz2S6zNUVxR")
View(album)
album$popularity
cancion = get_track("183Klch3PBWLz2S6zNUVxR")
cancion$popularity
# Libraries
library(spotifyr)
library(tidyverse)
library(ggplot2)
# Authentication
client_id <- paste(readLines("../keys/client_id.txt"), collapse=" ")
client_secret <- paste(readLines("../keys/client_secret.txt"), collapse=" ")
Sys.setenv(SPOTIFY_CLIENT_ID = client_id)
Sys.setenv(SPOTIFY_CLIENT_SECRET = client_secret)
access_token <- get_spotify_access_token()
data <- get_artist_audio_features('the beatles', include_groups = c('album', 'single'))
artists <- c('queen','eminem')
for (artist in artists){
audio_features <- get_artist_audio_features(artist, include_groups = c('album', 'single'))
data <- rbind(data, audio_features)
}
data <- data %>%
select(danceability, energy, key, loudness, speechiness, acousticness, instrumentalness, liveness, valence, tempo, track_id, mode_name)
cancionFeatures = get_track(data$track_id)
data <- data %>%
mutate(popularity = get_track(track_id))
data <- data %>%
mutate(popularity = get_track(data$track_id))
get_track(data$track_id)
data$track_id
data <- data %>%
mutate(popularity = get_track(data$track_id))
library(tidyr)
data <- data %>%
mutate(popularity = get_track(data$track_id))
?lappy
?lapply
mutate(popularity = lapply(data$track_id, get_track)
data <- data %>%
mutate(popularity = lapply(data$track_id, get_track))
data <- data %>%
mutate(popularity = lapply(data$track_id, get_track))
data <- data %>%
mutate(popularity = lapply(data$track_id, get_track))
data <- data %>%
mutate(popularity = (lapply(data$track_id, get_track))$popularity)
track_features = lapply(data$track_id, get_track)
test = get_artist_audio_features(artist = 'xu song',  include_groups = c('album', 'single'))
test = get_artist_audio_features(artist = 'xu song', include_groups = c("album", "single"), return_closest_artist = TRUE, dedupe_albums = TRUE,authorization = get_spotify_access_token())
test = get_artist_audio_features(artist = 'selena gomez', include_groups = c("album", "single"), return_closest_artist = TRUE, dedupe_albums = TRUE,authorization = get_spotify_access_token())
View(test)
track_features = lapply(test$track_id, get_track)
cancion = get_track("183Klch3PBWLz2S6zNUVxR")
View(cancion)
test = test %>% mutate(popularity = track_features$popularity)
View(test)
track_features$popularity
View(track_features)
# Libraries
library(spotifyr)
library(dplyr)
# Authentication
client_id <- paste(readLines("../keys/client_id.txt"), collapse=" ")
client_secret <- paste(readLines("../keys/client_secret.txt"), collapse=" ")
Sys.setenv(SPOTIFY_CLIENT_ID = client_id)
Sys.setenv(SPOTIFY_CLIENT_SECRET = client_secret)
# List of artists
artists <- c('the beatles','queen')
pop = c()
i = 1
for (artist in artists){
# Audio features for the artist discography
audio_features <- get_artist_audio_features(artist, include_groups = c('album'))
if (i == 1) {
data <- audio_features
} else {
data <- rbind(data, audio_features)
}
for (id in audio_features$track_id){
# Populariy of each track (not included in the audio features)
track <- get_track(id)
pop[i] <- track$popularity
i <- i + 1
}
}
data <- data %>%
select(danceability, energy, key, loudness, acousticness, instrumentalness, valence, tempo, track_id, mode, mode_name, -track_id) %>%
mutate(popularity = pop)
saveRDS(data, file = "../data/data.rds")
View(data)
library(ggplot2)
data <- readRDS(file = "../data/data.rds")
ggplot(data = data) +
geom_boxplot(mapping = aes(x = mode_name, y = valence))
ggplot(data = data) +
geom_point(mapping = aes(x = valence, y = popularity, color = mode_name))
ggplot(data = data) +
geom_point(mapping = aes(x = tempo, y = popularity, color = mode_name))
ggplot(data = data) +
geom_point(mapping = aes(x = loudness, y = popularity, color = mode_name))
ggplot(data = data) +
geom_point(mapping = aes(x = loudness, y = log(popularity), color = mode_name))
ggplot(data = data) +
geom_point(mapping = aes(x = mode, y = popularity, color = mode_name))
ggplot(data = data) +
geom_col(mapping = aes(x = mode, y = popularity, color = mode_name))
ggplot(data = data) +
geom_col(mapping = aes(x = instrumentalness, y = popularity, color = mode_name))
ggplot(data = data) +
geom_point(mapping = aes(x = instrumentalness, y = popularity, color = mode_name))
instrumentalness
acousticness, co
ggplot(data = data) +
geom_point(mapping = aes(x = instrumentalness, y = popularity, color = mode_name))
ggplot(data = data) +
geom_point(mapping = aes(x = instrumentalness, y = valence, color = mode_name))
acousticness, y
ggplot(data = data) +
geom_point(mapping = aes(x = acousticness, y = valence, color = mode_name))
ggplot(data = data) +
geom_point(mapping = aes(x = acousticness, y = instrumentalness, color = mode_name))
ggplot(data = data) +
geom_point(mapping = aes(x = acousticness, y = tempo, color = mode_name))
model = lm(data~.)
model = lm(data = data, data~.)
model = lm(data = data, formula = popularity~.)
summary(model)
model = lm(data = data, formula = popularity~.-mode_name)
summary(model)
model = lm(data = data, formula = popularity~.-mode)
summary(model)
model = lm(data = data, formula = popularity~danceability,energy,loudness,acousticness,instrumentalness)
model = lm(data = data, formula = popularity~ danceability,energy,loudness,acousticness,instrumentalness)
model = lm(data = data, formula = popularity~ danceability,energy,loudness,acousticness,instrumentalness)
model = lm(data = data, formula = popularity~ danceability,energy,loudness,instrumentalness)
model = lm(data = data, formula = popularity~.-danceability-mode)
summary(model)
model = lm(data = data, formula = popularity~.-danceability-mode-key-tempo-mode_name)
summary(model)
# Libraries
library(spotifyr)
library(dplyr)
# Authentication
client_id <- paste(readLines("../keys/client_id.txt"), collapse=" ")
client_secret <- paste(readLines("../keys/client_secret.txt"), collapse=" ")
Sys.setenv(SPOTIFY_CLIENT_ID = client_id)
Sys.setenv(SPOTIFY_CLIENT_SECRET = client_secret)
# List of artists
artists <- c('the beatles','queen')
pop = c()
i = 1
for (artist in artists){
# Audio features for the artist discography
audio_features <- get_artist_audio_features(artist, include_groups = c('album'))
if (i == 1) {
data <- audio_features
} else {
data <- rbind(data, audio_features)
}
for (id in audio_features$track_id){
# Populariy of each track (not included in the audio features)
track <- get_track(id)
pop[i] <- track$popularity
i <- i + 1
}
}
model = lm(data = data, formula = popularity~.)
data <- readRDS(file = "../data/data.rds")
model = lm(data = data, formula = popularity~.)
summary(model)
model = lm(data = data, formula = popularity~.-danceability-mode-key-tempo-mode_name)
summary(model)
model = lm(data = data, formula = popularity~.-mode-key-tempo-mode_name)
summary(model)
model = lm(data = data, formula = popularity~.)
summary(model)
model = lm(data = data, formula = popularity~.-mode-key-tempo-mode_name)
summary(model)
model = lm(data = data, formula = popularity~.)
summary(model)
data2 = mutate(data, pop = 0)
data2$pop[data2$pop>=0 & data2$pop<10] = 1
data2 = mutate(data, pop = 0)
data2$pop[data2$pop>=0 & data2$pop<10] = 1
data2$pop[data2$pop>=10 & data2$pop<20] = 2
data2$pop[data2$pop>=20 & data2$pop<30] = 3
data2$pop[data2$pop>=30 & data2$pop<40] = 4
data2$pop[data2$pop>=40 & data2$pop<50] = 5
data2$pop[data2$pop>=50 & data2$pop<60] = 6
data2$pop[data2$pop>=60 & data2$pop<10] = 7
data2$pop[data2$pop>=70 & data2$pop<80] = 8
data2$pop[data2$pop>=80 & data2$pop<90] = 9
data2$pop[data2$pop>=90 & data2$pop<100] = 10
View(data2)
data2 = mutate(data, pop = 0)
data2$pop[data2$popularity>=0 & data2$popularity<10] = 1
data2$pop[data2$popularity>=10 & data2$popularity<20] = 2
data2$pop[data2$popularity>=20 & data2$popularity<30] = 3
data2$pop[data2$popularity>=30 & data2$popularity<40] = 4
data2$pop[data2$popularity>=40 & data2$popularity<50] = 5
data2$pop[data2$popularity>=50 & data2$popularity<60] = 6
data2$pop[data2$popularity>=60 & data2$popularity<10] = 7
data2$pop[data2$popularity>=70 & data2$popularity<80] = 8
data2$pop[data2$popularity>=80 & data2$popularity<90] = 9
data2$pop[data2$popularity>=90 & data2$popularity<100] = 10
View(data2)
model = lm(data = data, formula = pop~.)
model = lm(data = data2, formula = pop~.)
summary(model)
model = lm(data = data2, formula = pop~.-popularity)
summary(model)
model = lm(data = data2, formula = pop~.-popularity-mode_name)
summary(model)
# Libraries
library(spotifyr)
library(dplyr)
# Authentication
client_id <- paste(readLines("../keys/client_id.txt"), collapse=" ")
client_secret <- paste(readLines("../keys/client_secret.txt"), collapse=" ")
Sys.setenv(SPOTIFY_CLIENT_ID = client_id)
Sys.setenv(SPOTIFY_CLIENT_SECRET = client_secret)
# List of artists
artists <- c('the beatles','queen')
pop = c()
i = 1
for (artist in artists){
# Audio features for the artist discography
audio_features <- get_artist_audio_features(artist, include_groups = c('album'))
if (i == 1) {
data <- audio_features
} else {
data <- rbind(data, audio_features)
}
for (id in audio_features$track_id){
# Populariy of each track (not included in the audio features)
track <- get_track(id)
pop[i] <- track$popularity
i <- i + 1
}
}
# Libraries
library(spotifyr)
library(dplyr)
# Authentication
client_id <- paste(readLines("../keys/client_id.txt"), collapse=" ")
client_secret <- paste(readLines("../keys/client_secret.txt"), collapse=" ")
Sys.setenv(SPOTIFY_CLIENT_ID = client_id)
Sys.setenv(SPOTIFY_CLIENT_SECRET = client_secret)
# List of artists
artists <- c('the beatles','queen')
pop = c()
i = 1
for (artist in artists){
# Audio features for the artist discography
audio_features <- get_artist_audio_features(artist, include_groups = c('album'))
if (i == 1) {
data <- audio_features
} else {
data <- rbind(data, audio_features)
}
for (id in audio_features$track_id){
# Populariy of each track (not included in the audio features)
track <- get_track(id)
pop[i] <- track$popularity
i <- i + 1
}
}
data <- data %>% mutate(popularity = pop)
model = lm(data = data, formula = popularity~.)
model = lm(data = data, formula = popularity~.)
model = lm(data = data, formula = popularity~.-album_images)
model = lm(data = data, formula = popularity~.-album_images)
data <- data %>% select(.-album_images)  %>% mutate(popularity = pop)
View(data)
data <- data %>% select(-album_images)  %>% mutate(popularity = pop)
model = lm(data = data, formula = popularity~.)
data <- data %>% select(-album_images-artists)  %>% mutate(popularity = pop)
data <- data %>% select(-artists)  %>% mutate(popularity = pop)
model = lm(data = data, formula = popularity~.)
data <- data %>% select(-available_markets)  %>% mutate(popularity = pop)
model = lm(data = data, formula = popularity~.)
data <- data %>% select(-contrasts)  %>% mutate(popularity = pop)
data <- data %>% select(.)  %>% mutate(popularity = pop)
model = lm(data = data, formula = popularity~.)
summary(model)
# Libraries
library(spotifyr)
library(dplyr)
# Authentication
client_id <- paste(readLines("../keys/client_id.txt"), collapse=" ")
client_secret <- paste(readLines("../keys/client_secret.txt"), collapse=" ")
Sys.setenv(SPOTIFY_CLIENT_ID = client_id)
Sys.setenv(SPOTIFY_CLIENT_SECRET = client_secret)
# List of artists
artists <- c('the beatles','queen')
pop = c()
i = 1
for (artist in artists){
# Audio features for the artist discography
audio_features <- get_artist_audio_features(artist, include_groups = c('album'))
if (i == 1) {
data <- audio_features
} else {
data <- rbind(data, audio_features)
}
for (id in audio_features$track_id){
# Populariy of each track (not included in the audio features)
track <- get_track(id)
pop[i] <- track$popularity
i <- i + 1
}
}
data <- data %>% select(-album_images)  %>% mutate(popularity = pop)
model = lm(data = data, formula = popularity~.)
data2 <- data %>% select(-artists)  %>% mutate(popularity = pop)
model = lm(data = data, formula = popularity~.)
data2 <- data %>% select(-artist)  %>% mutate(popularity = pop)
data2 <- data %>% select(-artists)  %>% mutate(popularity = pop)
model = lm(data = data, formula = popularity~.)
View(data2)
model = lm(data = data2, formula = popularity~.)
data2 <- data %>% select(-artists-available_markets)  %>% mutate(popularity = pop)
data2 <- data %>% select(-c("artists","available_markets"))  %>% mutate(popularity = pop)
model = lm(data = data2, formula = popularity~.)
# Libraries
library(spotifyr)
library(dplyr)
# Authentication
client_id <- paste(readLines("../keys/client_id.txt"), collapse=" ")
client_secret <- paste(readLines("../keys/client_secret.txt"), collapse=" ")
Sys.setenv(SPOTIFY_CLIENT_ID = client_id)
Sys.setenv(SPOTIFY_CLIENT_SECRET = client_secret)
# List of artists
artists <- c('the beatles','queen')
pop = c()
i = 1
for (artist in artists){
# Audio features for the artist discography
audio_features <- get_artist_audio_features(artist, include_groups = c('album'))
if (i == 1) {
data <- audio_features
} else {
data <- rbind(data, audio_features)
}
for (id in audio_features$track_id){
# Populariy of each track (not included in the audio features)
track <- get_track(id)
pop[i] <- track$popularity
i <- i + 1
}
}
data <- data %>%
select(duration, danceability, energy, key, loudness, acousticness, instrumentalness, valence, tempo, track_id, mode, mode_name, -track_id) %>%
mutate(popularity = pop)
